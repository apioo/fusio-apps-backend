
<h1>
  <a [routerLink]="['/', 'connection']">Connection</a> /
  <a [routerLink]="['/', 'connection', selectedConnection?.id]">{{selectedConnection?.name}}</a> /
  <a [routerLink]="['/', 'connection', selectedConnection?.id, 'database']">Database</a> /
  <a [routerLink]="['/', 'connection', selectedConnection?.id, 'database', table?.name]">{{ table?.name }}</a> /
  <a [routerLink]="getListLink()">Data</a> /
  {{ entity()[primaryKey] }} /
  <app-form-breadcrump [mode]="mode"></app-form-breadcrump>
</h1>

<form>
  <fusio-message [response]="response()"></fusio-message>
  @for (column of table?.columns; track column.name) {
    <div class="mb-3 row">
      @if (column.name) {
        <label [for]="column.name" class="col-lg-2 col-form-label fw-bold">{{ column.name }}</label>
        <div class="col-lg-10">
          <div class="input-group">
            @if (column.type === 'smallint') {
              <input type="number" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            @else if (column.type === 'integer') {
              <input type="number" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            @else if (column.type === 'boolean') {
              <select [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [required]="column.notNull || false" class="form-select">
                <option [ngValue]="1">True</option>
                <option [ngValue]="0">False</option>
              </select>
            }
            @else if (column.type === 'text') {
              <textarea [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control"></textarea>
            }
            @else if (column.type === 'json') {
              <textarea [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control"></textarea>
            }
            @else if (column.type === 'date') {
              <input type="date" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            @else if (column.type === 'datetime') {
              <input type="datetime-local" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            @else if (column.type === 'time') {
              <input type="time" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            @else {
              <input type="text" [name]="column.name" [(ngModel)]="entity()[column.name]" [disabled]="mode === 3" [placeholder]="entity()[column.name] === null ? 'NULL' : ''" [required]="column.notNull || false" class="form-control">
            }
            <button (click)="entity()[column.name] = null" class="btn btn-secondary"><i class="bi bi-x"></i></button>
          </div>
        </div>
      }
    </div>
  }
  <app-form-buttons (onCreate)="doCreate(entity)" (onUpdate)="doUpdate(entity)" (onDelete)="doDelete(entity)"></app-form-buttons>
</form>
