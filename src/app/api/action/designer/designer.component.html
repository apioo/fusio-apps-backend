
<h1>
  <a [routerLink]="['/', 'action']">Action</a> /
  <a [routerLink]="['/', 'action', '~' + action()?.name]">{{ action()?.name }}</a> /
  Designer
</h1>

<fusio-message [response]="message()"></fusio-message>

<div class="row">
  <div class="col-12">
    <div class="card">
      <div class="card-header">Action</div>
      @if (form(); as form) {
        @if (action(); as action) {
          <div class="card-body">
            <app-config [container]="form" [data]="action.config" (dataChange)="setConfig($event)"></app-config>
            <div class="btn-group">
              <button (click)="submit()" class="btn btn-primary" type="button">Execute</button>
              <button class="btn btn-secondary" (click)="openRequest()">Request</button>
            </div>
          </div>
        }
      }
    </div>
  </div>
</div>

@if (response(); as response) {
  <div class="row" style="margin-top:1rem;">
    <div class="col-md-12">
      <div class="card">
        @if (response.statusCode) {
          <div class="card-header" [ngClass]="{'text-bg-success': response.statusCode >= 200 && response.statusCode < 300, 'text-bg-warning': response.statusCode >= 400 && response.statusCode < 500, 'text-bg-danger': response.statusCode >= 500 && response.statusCode < 600}">Response @if (response.statusCode > 0) {<span> - {{response.statusCode}}</span>}</div>
        }
        <div class="card-body">
          <pre>{{ response.body|json }}</pre>
        </div>
      </div>
    </div>
  </div>
}
