
<h1>
  <a [routerLink]="['/', 'action']">Action</a> /
  <a [routerLink]="['/', 'action', '~' + action()?.name]">{{ action()?.name }}</a> /
  Designer
</h1>

<fusio-message [response]="message()"></fusio-message>

@if (action(); as action) {
  @if (actionClass() === 'Fusio.Adapter.Worker.Action.WorkerPHP' || actionClass() === 'Fusio.Adapter.Worker.Action.WorkerPHPLocal') {
    <app-action-designer-editor [action]="action" lang="php" [code]="getConfigKey('code')" (codeChange)="setConfigKey('code', $event)" (submitClick)="submit()" (requestClick)="openRequest()"></app-action-designer-editor>
  }
  @else if (actionClass() === 'Fusio.Adapter.Worker.Action.WorkerJava') {
    <app-action-designer-editor [action]="action" lang="java" [code]="getConfigKey('code')" (codeChange)="setConfigKey('code', $event)" (submitClick)="submit()" (requestClick)="openRequest()"></app-action-designer-editor>
  }
  @else if (actionClass() === 'Fusio.Adapter.Worker.Action.WorkerJavascript') {
    <app-action-designer-editor [action]="action" lang="javascript" [code]="getConfigKey('code')" (codeChange)="setConfigKey('code', $event)" (submitClick)="submit()" (requestClick)="openRequest()"></app-action-designer-editor>
  }
  @else if (actionClass() === 'Fusio.Adapter.Worker.Action.WorkerPython') {
    <app-action-designer-editor [action]="action" lang="python" [code]="getConfigKey('code')" (codeChange)="setConfigKey('code', $event)" (submitClick)="submit()" (requestClick)="openRequest()"></app-action-designer-editor>
  }
  @else {
    <div class="row">
      <div class="col-12">
        <div class="card">
          <div class="card-header">Action</div>
          @if (form(); as form) {
            <div class="card-body">
              <app-config [container]="form" [data]="action.config" (dataChange)="setConfig($event)"></app-config>
              <div class="btn-group">
                <button (click)="submit()" class="btn btn-primary" type="button">Execute</button>
                <button class="btn btn-secondary" (click)="openRequest()">Request</button>
              </div>
            </div>
          }
        </div>
      </div>
    </div>
  }
}

@if (response(); as response) {
  <app-action-designer-response [response]="response"></app-action-designer-response>
}
